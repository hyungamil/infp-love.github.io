<!DOCTYPE html>
<html lang="ko" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>인프피빵장님의 생각 정원</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Nanum+Pen+Script&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Noto Sans KR"', 'sans-serif'],
                        cute: ['"Jua"', 'sans-serif'],
                        hand: ['"Nanum Pen Script"', 'cursive'],
                    },
                    colors: {
                        infp: {
                            light: '#E9D5FF', 
                            main: '#d8b4fe',  
                            dark: '#9333EA',  
                            bg: '#FDF4FF',
                        }
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'wiggle': 'wiggle 1s ease-in-out infinite',
                        'heart-beat': 'heartBeat 0.3s ease-in-out',
                        'spin-slow': 'spin 8s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        wiggle: {
                            '0%, 100%': { transform: 'rotate(-3deg)' },
                            '50%': { transform: 'rotate(3deg)' },
                        },
                        heartBeat: {
                            '0%': { transform: 'scale(1)' },
                            '50%': { transform: 'scale(1.3)' },
                            '100%': { transform: 'scale(1)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #d8b4fe; border-radius: 10px; }
        .tape {
            background-color: rgba(255, 255, 255, 0.4);
            background-image: linear-gradient(90deg, transparent 50%, rgba(255,255,255,0.5) 50%);
            background-size: 10px 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            width: 100px;
            height: 25px;
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%) rotate(-1deg);
            z-index: 10;
            backdrop-filter: blur(2px);
            opacity: 0.8;
        }
        .wave-divider {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            overflow: hidden;
            line-height: 0;
            pointer-events: none;
        }
        .wave-divider svg {
            position: relative;
            display: block;
            width: calc(100% + 1.3px);
            height: 50px;
        }
        .wave-divider .shape-fill { fill: #FFFFFF; }
        .dark .wave-divider .shape-fill { fill: #1e293b; }
        .wave-top .shape-fill { fill: #FDF4FF; } 
        .dark .wave-top .shape-fill { fill: #0f172a; }
        .cute-card { transition: all 0.3s ease; }
        .cute-card:hover { transform: translateY(-5px) rotate(1deg); }
        .perspective { perspective: 1000px; }
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 1.5rem;
        }
        .card-back { transform: rotateY(180deg); }
        .flipped .card-inner { transform: rotateY(180deg); }
        .post-it {
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        .post-it:hover {
            transform: scale(1.03);
            z-index: 10;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.15);
        }
        .liked i { color: #ef4444; animation: heartBeat 0.3s ease-in-out; }
        h1, h2, h3, .nav-item { font-family: 'Jua', sans-serif; }
        .hand-text { font-family: 'Nanum Pen Script', cursive; font-size: 1.5rem; }
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.1); }
        
        .playing .music-icon { animation: spin 4s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-[#FDF4FF] dark:bg-slate-900 text-slate-700 dark:text-slate-200 font-sans overflow-x-hidden transition-colors duration-300">

    <div class="fixed inset-0 pointer-events-none z-0 overflow-hidden opacity-60 dark:opacity-20">
        <div class="absolute top-20 left-[10%] text-4xl animate-float">☁️</div>
        <div class="absolute bottom-[20%] right-[5%] text-5xl animate-float">🌸</div>
    </div>

    <!-- 네비게이션 -->
    <nav class="bg-white/70 dark:bg-slate-800/80 backdrop-blur-lg border-b border-white/50 dark:border-slate-700 fixed w-full z-50 shadow-sm rounded-b-[2rem]">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl md:text-3xl text-infp-dark dark:text-purple-300 hover:text-infp-main transition flex items-center group z-50">
                <span class="bg-purple-100 dark:bg-slate-700 p-2 rounded-full mr-3 group-hover:rotate-12 transition text-2xl">🪶</span>
                <span class="font-cute pt-1">Thought Garden</span>
            </a>
            <div class="hidden lg:flex items-center space-x-2 text-lg font-medium text-slate-600 dark:text-slate-300">
                <a href="#society" class="nav-item px-4 py-2 rounded-full hover:bg-purple-100 dark:hover:bg-slate-700 transition">교육과 사회</a>
                <a href="#infp" class="nav-item px-4 py-2 rounded-full hover:bg-purple-100 dark:hover:bg-slate-700 transition">INFP</a>
                <a href="#relationship" class="nav-item px-4 py-2 rounded-full hover:bg-purple-100 dark:hover:bg-slate-700 transition">관계</a>
                <a href="#comfort" class="nav-item px-4 py-2 rounded-full hover:bg-purple-100 dark:hover:bg-slate-700 transition">위로</a>
                <a href="#guestbook" class="nav-item px-5 py-2 bg-gradient-to-r from-purple-400 to-pink-400 text-white rounded-full hover:shadow-lg hover:scale-105 transition transform shadow-md">
                    <i class="fas fa-pen mr-1 text-sm"></i> 방명록
                </a>
                <button onclick="openJournal()" class="ml-2 p-2 rounded-full bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-300 hover:scale-110 transition shadow-sm" title="정원 일지">
                    <i class="fas fa-book"></i>
                </button>
                <button id="themeBtnDesktop" class="ml-4 p-2 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-yellow-300 hover:scale-110 transition">
                    <i class="fas fa-moon dark:hidden"></i><i class="fas fa-sun hidden dark:inline"></i>
                </button>
            </div>
             <div class="flex items-center lg:hidden gap-3 z-50">
                <button onclick="openJournal()" class="p-2 rounded-full bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-300">
                    <i class="fas fa-book"></i>
                </button>
                <button id="themeBtnMobile" class="p-2 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-yellow-300">
                    <i class="fas fa-moon dark:hidden"></i><i class="fas fa-sun hidden dark:inline"></i>
                </button>
                <button id="mobile-menu-btn" class="text-purple-500 dark:text-purple-300 focus:outline-none bg-white dark:bg-slate-700 p-2 rounded-xl shadow-sm">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
             </div>
        </div>
        <div id="mobile-menu" class="hidden lg:hidden bg-white/95 dark:bg-slate-800/95 backdrop-blur border-t border-purple-100 dark:border-slate-700 absolute w-full shadow-lg rounded-b-2xl p-6 top-full left-0 z-40">
            <a href="#society" class="mobile-link block py-4 px-6 text-xl text-slate-600 dark:text-slate-200 hover:bg-purple-50 dark:hover:bg-slate-700 rounded-xl font-cute">교육과 사회</a>
            <a href="#infp" class="mobile-link block py-4 px-6 text-xl text-slate-600 dark:text-slate-200 hover:bg-purple-50 dark:hover:bg-slate-700 rounded-xl font-cute">INFP</a>
            <a href="#relationship" class="mobile-link block py-4 px-6 text-xl text-slate-600 dark:text-slate-200 hover:bg-purple-50 dark:hover:bg-slate-700 rounded-xl font-cute">관계와 구원</a>
            <a href="#comfort" class="mobile-link block py-4 px-6 text-xl text-slate-600 dark:text-slate-200 hover:bg-purple-50 dark:hover:bg-slate-700 rounded-xl font-cute">마음의 위로</a>
            <a href="#guestbook" class="mobile-link block py-4 px-6 text-xl text-infp-dark dark:text-purple-300 font-bold hover:bg-purple-50 dark:hover:bg-slate-700 rounded-xl font-cute">💌 방명록 남기기</a>
        </div>
    </nav>

    <!-- 정원 일지 모달 -->
    <div id="journalModal" class="fixed inset-0 bg-black/50 z-[100] hidden flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-white dark:bg-slate-800 w-full max-w-lg rounded-[2rem] shadow-2xl p-8 relative">
            <button onclick="closeJournal()" class="absolute top-4 right-4 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200">
                <i class="fas fa-times text-2xl"></i>
            </button>
            <h3 class="text-3xl font-cute text-center mb-6 text-slate-800 dark:text-white">📚 정원 일지</h3>
            <div id="journalList" class="space-y-4 max-h-[60vh] overflow-y-auto custom-scroll pr-2">
                <div class="text-center text-slate-500 py-4 font-hand text-xl">아직 기록된 계절이 없어요.</div>
            </div>
        </div>
    </div>

    <!-- [기능 5번] 깊은 질문 카드 섹션 -->
    <section class="pt-40 pb-10 px-6 text-center relative z-10">
        <div class="max-w-md mx-auto h-64 perspective cursor-pointer" onclick="this.classList.toggle('flipped')">
            <div class="card-inner shadow-xl">
                <div class="card-front bg-gradient-to-br from-purple-400 to-indigo-400 text-white flex flex-col">
                    <div class="text-4xl mb-4">🌙</div>
                    <h3 class="text-2xl font-cute">오늘의 깊은 질문</h3>
                    <p class="text-sm mt-2 opacity-80">카드를 눌러보세요</p>
                </div>
                <div class="card-back bg-white dark:bg-slate-800 border-2 border-purple-200 dark:border-slate-600 flex flex-col p-6">
                    <span class="text-purple-400 text-4xl mb-4">❝</span>
                    <p id="dailyQuestion" class="text-xl md:text-2xl font-hand text-slate-700 dark:text-slate-200 leading-relaxed">
                        당신의 영혼은<br>무슨 색깔인가요?
                    </p>
                    <span class="text-purple-400 text-4xl mt-4 self-end">❞</span>
                </div>
            </div>
        </div>
    </section>

    <!-- [기능 10번] 식물 키우기 -->
    <section class="py-10 text-center relative z-10">
        <div class="max-w-2xl mx-auto bg-white/50 dark:bg-slate-800/50 p-8 rounded-[3rem] backdrop-blur-sm border border-white dark:border-slate-600 shadow-lg">
            <h2 class="text-3xl font-cute text-slate-800 dark:text-slate-100 mb-2">
                우리의 정원이 자라나요 🌱
            </h2>
            <p class="text-slate-500 dark:text-slate-400 font-hand text-lg mb-6">여러분의 글이 모여 나무가 됩니다.</p>
            <div class="relative w-64 h-64 mx-auto mb-6">
                <!-- 🚨 이미지 파일 이름을 plant_1.jpg 로 맞춰주세요! -->
                <img id="plantImage" src="plant_1.jpg" alt="성장하는 식물" class="w-full h-full object-contain drop-shadow-md animate-float">
            </div>
            <div class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-4 mb-4 overflow-hidden">
                <div id="plantProgress" class="bg-gradient-to-r from-green-400 to-emerald-500 h-4 rounded-full transition-all duration-1000" style="width: 10%"></div>
            </div>
            <div class="flex justify-center items-center gap-4">
                <p id="plantLevelText" class="font-cute text-emerald-600 dark:text-emerald-400 text-xl">Level 1. 꿈꾸는 씨앗 (0/50)</p>
                <button id="harvestBtn" onclick="harvestGarden()" class="hidden px-4 py-2 bg-yellow-400 hover:bg-yellow-500 text-white rounded-full font-cute shadow-md animate-bounce">
                    🧺 수확하기
                </button>
            </div>
        </div>
    </section>

    <!-- 히어로 섹션 -->
    <header class="py-20 px-6 text-center relative z-10">
        <div class="max-w-4xl mx-auto">
            <span class="inline-block py-2 px-6 md:px-8 rounded-full bg-white dark:bg-slate-800 border-2 border-purple-200 dark:border-slate-600 text-purple-600 dark:text-purple-300 text-base md:text-lg font-cute mb-8 shadow-sm transform -rotate-2">
                인프피빵장님의 생각 노트
            </span>
            <h1 class="text-4xl md:text-7xl lg:text-8xl font-cute text-slate-800 dark:text-slate-100 mb-10 leading-tight drop-shadow-sm">
                현실에 발을 반만 담그고<br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-500 via-pink-500 to-orange-400">이상을 꿈꾸는 우리</span>에게
            </h1>
            <div class="relative inline-block">
                <p class="text-xl md:text-3xl text-slate-600 dark:text-slate-300 leading-relaxed font-hand bg-white/50 dark:bg-slate-800/50 inline-block px-8 py-4 rounded-3xl backdrop-blur-sm border border-white dark:border-slate-600">
                    세상의 잣대에 흔들리지 않고,<br class="md:hidden"> 고유한 내면의 빛을 지키는 방법에 대하여.
                </p>
            </div>
        </div>
    </header>

    <!-- 1. 교육과 사회 -->
    <section id="society" class="py-24 bg-white dark:bg-slate-800 relative z-10 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-20">
                <h2 class="text-4xl md:text-6xl font-cute text-slate-800 dark:text-white mb-6">교육과 사회에 대한 시선</h2>
                <p class="mt-4 text-slate-500 dark:text-slate-400 font-hand text-2xl">진정한 성장의 의미를 다시 묻다</p>
            </div>
            <div class="grid md:grid-cols-2 gap-10">
                <div class="cute-card bg-[#fff5f5] dark:bg-slate-700/50 p-10 rounded-[2.5rem] border-2 border-red-100 dark:border-slate-600">
                    <div class="tape bg-red-100/50 dark:bg-slate-500/50 rotate-2"></div>
                    <div class="w-20 h-20 bg-white dark:bg-slate-800 rounded-full flex items-center justify-center text-red-400 text-3xl mb-8 shadow-sm">🎯</div>
                    <h3 class="text-3xl font-cute mb-4 text-slate-800 dark:text-slate-100">'스펙'은 무기의 제원이다</h3>
                    <p class="text-slate-600 dark:text-slate-300 leading-relaxed font-hand text-2xl">스펙(Specification)은 원래 기계나 무기의 살상력을 뜻합니다. 우리는 스스로를 존엄한 존재가 아닌, '기능적 도구'로 취급하고 있지 않나요?</p>
                </div>
                <div class="cute-card bg-[#f0f9ff] dark:bg-slate-700/50 p-10 rounded-[2.5rem] border-2 border-blue-100 dark:border-slate-600">
                    <div class="tape bg-blue-100/50 dark:bg-slate-500/50 -rotate-2"></div>
                    <div class="w-20 h-20 bg-white dark:bg-slate-800 rounded-full flex items-center justify-center text-blue-400 text-3xl mb-8 shadow-sm">🌱</div>
                    <h3 class="text-3xl font-cute mb-4 text-slate-800 dark:text-slate-100">교육(E-ducare)의 참뜻</h3>
                    <p class="text-slate-600 dark:text-slate-300 leading-relaxed font-hand text-2xl">'E(Out)' + 'ducare'. 교육은 밖에서 안으로 억지로 집어넣는 것이 아닙니다. 당신 안의 고유한 잠재력을 밖으로 끌어내는 것입니다.</p>
                </div>
                <div class="cute-card bg-[#fffbeb] dark:bg-slate-700/50 p-10 rounded-[2.5rem] border-2 border-yellow-100 dark:border-slate-600">
                    <div class="tape bg-yellow-100/50 dark:bg-slate-500/50 rotate-1"></div>
                    <div class="w-20 h-20 bg-white dark:bg-slate-800 rounded-full flex items-center justify-center text-yellow-500 text-3xl mb-8 shadow-sm">🤝</div>
                    <h3 class="text-3xl font-cute mb-4 text-slate-800 dark:text-slate-100">성숙한 시민의 조건</h3>
                    <p class="text-slate-600 dark:text-slate-300 leading-relaxed font-hand text-2xl">독일 교육이 '반성'과 '죄책감'을 가르치듯, 진정한 성숙은 '우리가 무엇을 잘못했는가'를 성찰하는 데서 옵니다. 경쟁보다 협력이, 성공보다 연대가 우리를 더 단단하게 만듭니다.</p>
                </div>
                <div class="cute-card bg-[#f3e8ff] dark:bg-slate-700/50 p-10 rounded-[2.5rem] border-2 border-purple-100 dark:border-slate-600">
                    <div class="tape bg-purple-100/50 dark:bg-slate-500/50 -rotate-1"></div>
                    <div class="w-20 h-20 bg-white dark:bg-slate-800 rounded-full flex items-center justify-center text-purple-500 text-3xl mb-8 shadow-sm">💎</div>
                    <h3 class="text-3xl font-cute mb-4 text-slate-800 dark:text-slate-100">순수함을 지키는 용기</h3>
                    <p class="text-slate-600 dark:text-slate-300 leading-relaxed font-hand text-2xl">자본주의의 '능력'이 때로는 포장 기술이나 정치력일지라도, 순수함을 잃지 않고 가치를 지키는 삶. 그것이 지옥 같은 현실에서도 우리를 구원할 것입니다.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 2. INFP의 내면 -->
    <section id="infp" class="py-32 bg-[#FDF4FF] dark:bg-slate-900 relative z-0 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-6 relative z-10">
            <div class="flex flex-col md:flex-row items-center gap-16">
                <div class="md:w-1/2">
                    <span class="inline-block px-4 py-1 bg-purple-200 dark:bg-purple-900 text-purple-700 dark:text-purple-200 rounded-lg font-cute text-base mb-6 transform -rotate-2">✨ Inner Self</span>
                    <h2 class="text-5xl md:text-7xl font-cute text-slate-900 dark:text-white mt-2 mb-8">INFP,<br><span class="text-purple-500 dark:text-purple-400">아름다운 약점</span></h2>
                    <p class="text-2xl text-slate-600 dark:text-slate-300 mb-10 leading-relaxed font-hand">섬세함은 약점이 아닙니다.<br>세상을 더 아름답게 만드는, 당신만의 특별한 렌즈입니다.</p>
                    <div class="space-y-8">
                        <div class="flex items-start bg-white/60 dark:bg-slate-800/60 p-6 rounded-3xl backdrop-blur-sm border border-white dark:border-slate-700">
                            <span class="text-3xl mr-5">💖</span>
                            <div>
                                <h4 class="font-cute text-2xl text-slate-800 dark:text-white">사회성은 '사랑받는 능력'</h4>
                                <p class="text-xl text-slate-600 dark:text-slate-300 mt-2 font-hand">기계적인 적응이 아닙니다. 진실된 모습으로 깊은 사랑을 받아내는 힘, 그것이 당신의 사회성입니다.</p>
                            </div>
                        </div>
                        <div class="flex items-start bg-white/60 dark:bg-slate-800/60 p-6 rounded-3xl backdrop-blur-sm border border-white dark:border-slate-700">
                            <span class="text-3xl mr-5">🪞</span>
                            <div>
                                <h4 class="font-cute text-2xl text-slate-800 dark:text-white">자책과 반성의 힘</h4>
                                <p class="text-xl text-slate-600 dark:text-slate-300 mt-2 font-hand">자책은 우리를 괴물로 만들지 않게 하는 브레이크입니다. 건강한 죄책감은 성숙의 동력이 됩니다.</p>
                            </div>
                        </div>
                        <div class="flex items-start bg-white/60 dark:bg-slate-800/60 p-6 rounded-3xl backdrop-blur-sm border border-white dark:border-slate-700">
                            <span class="text-3xl mr-5">✒️</span>
                            <div>
                                <h4 class="font-cute text-2xl text-slate-800 dark:text-white">모든 INFP는 작가다</h4>
                                <p class="text-xl text-slate-600 dark:text-slate-300 mt-2 font-hand">삶 자체가 이야기인 당신. 현실에 발을 딛고 이상을 노래하는 당신은 이미 작가입니다.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="md:w-1/2 w-full">
                    <div class="bg-yellow-50 dark:bg-slate-800 p-10 md:p-14 rounded-[3rem] shadow-md transform rotate-2 hover:rotate-0 transition duration-500 border border-yellow-100 dark:border-slate-700 text-center relative">
                        <div class="absolute -top-5 left-1/2 -translate-x-1/2 w-40 h-10 bg-purple-200/50 dark:bg-purple-900/50 backdrop-blur-sm rotate-1 tape"></div>
                        <i class="fas fa-book-open text-7xl text-purple-300 dark:text-purple-500 mb-8 animate-pulse"></i>
                        <p class="font-hand text-3xl md:text-4xl text-slate-700 dark:text-slate-200 mb-8 leading-snug">"안전한 모험을 하세요.<br>나를 해치지 않는 선에서<br>끊임없이 나아갈 때,<br>비로소 아름다운 인연을 만납니다."</p>
                        <span class="text-lg text-slate-400 dark:text-slate-500 font-cute bg-white dark:bg-slate-900 px-5 py-2 rounded-full border border-slate-100 dark:border-slate-600">- 인프피빵장 -</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 3. 관계 -->
    <section id="relationship" class="py-24 bg-white dark:bg-slate-800 relative z-10 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-20">
                <h2 class="text-5xl md:text-6xl font-cute text-slate-800 dark:text-white mb-6">관계의 온도</h2>
                <p class="text-slate-500 dark:text-slate-400 font-hand text-2xl">진정한 구원과 도움에 대하여</p>
            </div>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="cute-card bg-gradient-to-br from-indigo-50 to-white dark:from-slate-700 dark:to-slate-800 p-8 rounded-[2rem] border border-indigo-100 dark:border-slate-600 text-center">
                    <div class="text-5xl mb-6">🤲</div>
                    <h3 class="font-cute text-2xl mb-3 text-indigo-900 dark:text-indigo-200">거마비 없는 도움</h3>
                    <p class="text-xl font-hand text-slate-600 dark:text-slate-300">대가를 바라는 도움은 거래입니다. 조건 없이 내미는 손길만이 진정한 구원입니다.</p>
                </div>
                <div class="cute-card bg-gradient-to-br from-pink-50 to-white dark:from-slate-700 dark:to-slate-800 p-8 rounded-[2rem] border border-pink-100 dark:border-slate-600 text-center">
                    <div class="text-5xl mb-6">✂️</div>
                    <h3 class="font-cute text-2xl mb-3 text-pink-900 dark:text-pink-200">혼자가 될 용기</h3>
                    <p class="text-xl font-hand text-slate-600 dark:text-slate-300">결이 맞지 않는 관계는 끊어내세요. 스스로를 도울 줄 알 때 인연이 찾아옵니다.</p>
                </div>
                 <div class="cute-card bg-gradient-to-br from-green-50 to-white dark:from-slate-700 dark:to-slate-800 p-8 rounded-[2rem] border border-green-100 dark:border-slate-600 text-center">
                    <div class="text-5xl mb-6">🎁</div>
                    <h3 class="font-cute text-2xl mb-3 text-green-900 dark:text-green-200">주는 기쁨</h3>
                    <p class="text-xl font-hand text-slate-600 dark:text-slate-300">'도움만 주는 공간'을 찾아보세요. 기여할 때 비로소 배부른 행복을 느낄 수 있습니다.</p>
                </div>
                <div class="cute-card bg-gradient-to-br from-orange-50 to-white dark:from-slate-700 dark:to-slate-800 p-8 rounded-[2rem] border border-orange-100 dark:border-slate-600 text-center">
                    <div class="text-5xl mb-6">😊</div>
                    <h3 class="font-cute text-2xl mb-3 text-orange-900 dark:text-orange-200">재미보단 의미</h3>
                    <p class="text-xl font-hand text-slate-600 dark:text-slate-300">박장대소하는 코미디보다, 잔잔한 미소를 짓게 하는 '의미'있는 삶을 지향합니다.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- [기능 9번] 새벽 감성 음악실 (심플 오디오) -->
    <section class="py-24 px-6 relative z-10 bg-[#FDF4FF] dark:bg-slate-900 transition-colors duration-300">
        <div class="max-w-5xl mx-auto">
            <div class="flex flex-col items-center justify-center mb-12 gap-3">
                <div class="flex items-center gap-3">
                    <i class="fas fa-headphones text-4xl text-purple-400 animate-bounce"></i>
                    <h2 class="text-4xl font-cute text-slate-800 dark:text-white">새벽 감성 음악실</h2>
                </div>
                <p class="text-slate-500 dark:text-slate-400 font-hand text-xl">플레이 버튼을 누르면 노래가 나와요 🎧</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- 플레이어 1 -->
                <div id="playerCard0" class="bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-lg border border-purple-100 dark:border-slate-700 flex flex-col items-center justify-center gap-4 hover:-translate-y-2 transition duration-300">
                    <div class="music-icon w-24 h-24 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center text-5xl shadow-inner mb-2">🎹</div>
                    <div class="text-center">
                        <h4 class="font-cute text-2xl text-slate-700 dark:text-slate-200">지브리 피아노</h4>
                        <p class="text-sm text-slate-400 font-sans">공부할 때 듣기 좋은</p>
                    </div>
                    <div class="flex gap-4 mt-2">
                        <button onclick="toggleAudio(0)" id="btn0" class="w-12 h-12 bg-purple-500 hover:bg-purple-600 text-white rounded-full flex items-center justify-center shadow-md transition transform active:scale-95">
                            <i class="fas fa-play ml-1"></i>
                        </button>
                    </div>
                </div>

                <!-- 플레이어 2 -->
                <div id="playerCard1" class="bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-lg border border-blue-100 dark:border-slate-700 flex flex-col items-center justify-center gap-4 hover:-translate-y-2 transition duration-300">
                    <div class="music-icon w-24 h-24 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center text-5xl shadow-inner mb-2">🌧️</div>
                    <div class="text-center">
                        <h4 class="font-cute text-2xl text-slate-700 dark:text-slate-200">빗소리 ASMR</h4>
                        <p class="text-sm text-slate-400 font-sans">창가에 맺힌 빗방울</p>
                    </div>
                    <div class="flex gap-4 mt-2">
                        <button onclick="toggleAudio(1)" id="btn1" class="w-12 h-12 bg-blue-500 hover:bg-blue-600 text-white rounded-full flex items-center justify-center shadow-md transition transform active:scale-95">
                            <i class="fas fa-play ml-1"></i>
                        </button>
                    </div>
                </div>

                <!-- 플레이어 3 -->
                <div id="playerCard2" class="bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-lg border border-yellow-100 dark:border-slate-700 flex flex-col items-center justify-center gap-4 hover:-translate-y-2 transition duration-300">
                    <div class="music-icon w-24 h-24 bg-yellow-100 dark:bg-yellow-900 rounded-full flex items-center justify-center text-5xl shadow-inner mb-2">🌙</div>
                    <div class="text-center">
                        <h4 class="font-cute text-2xl text-slate-700 dark:text-slate-200">새벽 2시 감성</h4>
                        <p class="text-sm text-slate-400 font-sans">essential; 플레이리스트</p>
                    </div>
                    <div class="flex gap-4 mt-2">
                        <button onclick="toggleAudio(2)" id="btn2" class="w-12 h-12 bg-yellow-500 hover:bg-yellow-600 text-white rounded-full flex items-center justify-center shadow-md transition transform active:scale-95">
                            <i class="fas fa-play ml-1"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 숨겨진 유튜브 플레이어 -->
            <div id="youtube-players" class="hidden">
                <div id="player0"></div>
                <div id="player1"></div>
                <div id="player2"></div>
            </div>
        </div>
    </section>

    <!-- 4. 마음의 위로와 공지 -->
    <section id="comfort" class="py-24 bg-white dark:bg-slate-800 relative z-10 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-20">
                <span class="inline-block bg-[#FDF4FF] dark:bg-slate-700 px-5 py-2 rounded-full text-infp-dark dark:text-purple-300 font-cute text-base border border-purple-100 dark:border-slate-600 shadow-sm mb-6">💜 Comfort & Notice</span>
                <h2 class="text-5xl md:text-6xl font-cute text-slate-800 dark:text-white mb-6">마음의 위로와 공지</h2>
                <p class="text-slate-500 dark:text-slate-400 max-w-3xl mx-auto font-hand text-2xl">방장님이 전하는 따뜻한 진심과 위로의 말들을 모았습니다.<br>힘들 때마다 이곳에서 쉬어가세요.</p>
            </div>

            <div class="columns-1 md:columns-2 lg:columns-3 gap-8 space-y-8">
                <!-- 17 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative overflow-hidden group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 17.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">신념이 흔들릴 때</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">믿음이란 건 현실에서 무언가를 내어주면 내어줄수록 커집니다. 여러분은 제게 현실적인 것을 주지 않아 믿음이 흔들릴 수 있습니다. 그럴 때마다 저의 진심과 순수함을 기억해주세요.</p>
                </div>
                <!-- 18 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative overflow-hidden group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 18.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">9와 4분의 3 승강장</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">간단히 지나가는 곳 같지만, 방의 매력을 알지 못하면 오래 머물 수 없는 인프피를 위한 깊은 신뢰의 공간에 오신 걸 환영합니다!</p>
                </div>
                <!-- 19 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative overflow-hidden group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 19.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">Empowerment</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">방의 운영방식은 경영의 임파워먼트(권한 위임) 방식과 유사합니다. 방의 구성원인 여러분이 주인공이며, 주체입니다^^</p>
                </div>
                <!-- 20 -->
                <div class="break-inside-avoid bg-gradient-to-br from-purple-400 to-indigo-400 dark:from-purple-800 dark:to-indigo-800 p-8 rounded-[2rem] shadow-md text-white transform rotate-1 hover:rotate-0 transition">
                    <div class="text-purple-100 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-heart mr-3 text-sm"></i> 20.</div>
                    <h3 class="font-cute text-3xl mb-4">아가페</h3>
                    <p class="text-purple-50 text-2xl leading-relaxed font-hand">전 무교이지만, 상대방이 어떤 존재라도 이해하려 노력합니다. 여러분이 저를 조건 없이 대해 준다면, 저 역시 여러분을 절대적으로 사랑하겠습니다 >_<</p>
                </div>
                <!-- 21 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 21.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">Leader vs Reader</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">진정한 리더는 앞에서 사람을 이끄는 존재(Leader)가 아닌, 뒤에서 사람의 마음을 읽는 존재(Reader)라고 생각합니다.</p>
                </div>
                <!-- 22 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 22.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">대화와 성품</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">대화를 많이 한다고 뛰어난 것도, 적게 한다고 부족한 것도 아닙니다. 다만 본인이 어떤 성품을 지녔는지는 대화를 통해서만 알 수 있습니다.</p>
                </div>
                <!-- 23 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 23.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">미움 받을 용기</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">최선을 다해도 누군가는 당신을 미워합니다. 하지만 그 모습이 행복을 불러옵니다. 소수의 미움 때문에 올곧은 행동을 포기하지 마세요.</p>
                </div>
                <!-- 24 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 24.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">기대와 존중</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">기대가 없으면 실망도 없습니다. 처음에 갖는 기대는 환상에 가깝습니다. 상대방을 있는 그대로 존중해주도록 노력합시다!</p>
                </div>
                <!-- 25 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 25.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">따뜻한 배려</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">인프피가 어떤 충고나 차가운 말을 할 때는 몇 번을 참았다 뱉는 말일 거예요. 알 거 다 알면서 포근한 분들이니 따뜻하게 대해주세요.</p>
                </div>
                <!-- 26 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 26.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">겸손의 미덕</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">상대방이 편할수록 더 소중히 대하고, 가진 것이 많을수록 더 겸손해지시길 바래요. 자랑은 자만, 겸손은 존경과 비슷한 말입니다.</p>
                </div>
                <!-- 27 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 27.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">빛과 그림자</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">본인만 대단한 걸 모르는 존재가 되세요. 빛은 환하게 비쳐주는 사람들이 없으면 무용지물입니다. 본인이 뛰어난 이유는 타인이 존재하기 때문임을 명심하세요.</p>
                </div>
                <!-- 28 -->
                <div class="break-inside-avoid bg-purple-100 dark:bg-slate-700 p-8 rounded-[2rem] shadow-inner border border-purple-200 dark:border-slate-600">
                    <div class="text-purple-600 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-heart mr-3 text-sm"></i> 28.</div>
                    <h3 class="font-cute text-3xl mb-4 text-purple-900 dark:text-purple-200">한결같은 사람</h3>
                    <p class="text-purple-800 dark:text-slate-300 text-2xl leading-relaxed font-hand">한 사람을 오랫동안 대하는 태도가 변함없는 것이 한결같음입니다. 설령 상대방이 위험한 사람이라도 내가 한결같으면, 그 사람을 아름다운 존재로 바꿀 수 있다고 믿어요.</p>
                </div>
                <!-- 29 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 29.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">내면의 호기심</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">"이 사람은 어떤 생각을 가졌을까?"라는 호기심을 가지세요. 타인의 진짜 내면은 오랜 만남 후에 드러납니다. 장기적인 내면의 호기심이 좋은 사람을 알아보는 열쇠입니다.</p>
                </div>
                <!-- 30 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 30.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">선한 신념</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">선한 신념은 유지하기 불편하고 많은 인내가 필요합니다. 하지만 꿋꿋이 유지하면 세상의 아름다움은 내 마음속에 있다는 걸 느끼게 될 거예요. 무너지고 싶을 때 천국방을 찾아주세요.</p>
                </div>
                <!-- 31 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 31.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">느림의 미학</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">인생은 달리기가 아닙니다. 느릴수록 더 넓게 보고 더 깊게 느낄 수 있습니다.</p>
                </div>
                <!-- 32 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 32.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">순간을 느끼기</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">사진으로 남기는 것보다 그 순간의 행복한 내 모습으로 만족하세요. 인생의 주체는 내가 되어야 합니다.</p>
                </div>
                <!-- 33 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 33.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">얕고 오래 보기</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">타인을 한 번에 알려고 하지 말고 천천히 알아가세요. 종이 한 장이 수백 장 쌓이면 뚫리지 않듯, 튼튼한 인연을 만들어가요.</p>
                </div>
                <!-- 34 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 34.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">존중</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">맞지 않는 사람을 억지로 바꾸려 하지 마세요. 있는 그대로 받아들이고 존중해주세요. 가장 좋은 건 스스로 깨닫게 해주는 사람이 되는 것입니다.</p>
                </div>
                <!-- 35 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 35.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">결단의 순간</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">중요한 순간에는 결단하세요. 결단은 진짜 좋은 사람을 가리는 과정입니다. 단 몇 명만 남더라도 그건 성공한 거예요.</p>
                </div>
                <!-- 36 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 36.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">사람이 제일 소중해</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">세상에서 가장 소중한 건 사람입니다. 관계에 지치고 포기하고 싶을 때, 그 낙담을 씻어줄 소중한 사람이 또 나타날 거예요.</p>
                </div>
                <!-- 37 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-crown mr-3 text-sm"></i> 37.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">인프피를 구하라</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">잔다르크처럼, 이 방이 공허한 인프피들의 마음을 구하는 쉼터가 되었으면 좋겠습니다. 머무는 동안 현실의 고통을 덜고 행복하세요!</p>
                </div>
                <!-- 38 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 38.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">사랑은 축복</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">선택한 단 한 사람을 외롭게 두지 마세요. 생이 망가지지 않을 정도로 후회 없는 사랑을 하세요. 둘만의 무대를 만드시길 바랍니다.</p>
                </div>
                <!-- 39 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 39.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">천국방과 나</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">천국방은 저의 내면이 고스란히 담긴 곳입니다. 저와 가까워지고 싶다면 이 방과 구성원들을 사랑해주세요. 그것이 저와 진정으로 가까워지는 길입니다.</p>
                </div>
                <!-- 40 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 40.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">울어도 돼요</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">혼자 우는 게 서럽다는 걸 알아요. 마음의 흙이 씻겨 내려갈 때까지 따뜻한 사람들이 함께 있어줄 거예요.</p>
                </div>
                <!-- 41 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 41.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">위대한 쇼맨</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">당신은 위대합니다. 아무에게도 꺼내지 못한 보물을 보여주세요. 조금만 용기 내주세요. 당신의 기쁨을 위하여.</p>
                </div>
                <!-- 42 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 42.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">뭣이 중헌디!</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">편견 없이 서로의 따뜻함을 나누는 것이 중요합니다. 바뀌려는 의지가 있다면 어느새 멋진 사람이 되어 있을 거예요. 천천히 그때를 기다립시다.</p>
                </div>
                <!-- 43 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 43.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">인생은 모험</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">안정적인 곳에 안주하지 말고 미지의 세상으로 뛰어드세요. 새로운 세상에서 주인이 되어 행복한 인생을 개척합시다.</p>
                </div>
                <!-- 44 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 44.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">아이를 지켜주세요</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">인프피는 아이처럼 순수한 존재입니다. 어른이 되어서도 아이로 살아가는 이들을 위한 이 공간이 무너지지 않게 존중하고 지켜주세요.</p>
                </div>
                <!-- 45 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 45.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">네 멋대로 해라</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">꿈이 멀어져 간다면 평판은 과감히 던져버리고 나아가세요. 멋있는 꿈을 위해 멋대로 하는 당신을 응원합니다.</p>
                </div>
                <!-- 46 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 46.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">자책하되 좌절 금지</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">자책을 통해 깨달음을 얻되, 깊은 수렁에 빠지지는 마세요. 잘못된 부분만 반성하고 성찰하여 변화하세요.</p>
                </div>
                <!-- 47 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 47.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">진실을 찾는 존재들</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">인프피는 맑은 물 같아서 진실을 찾으려 노력합니다. 그대들이 있기에 세상은 검어지지 않습니다.</p>
                </div>
                <!-- 48 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 48.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">결, 단결, 해결</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">진정한 해결은 결이 같은 사람들끼리 모였을 때 이루어집니다. 하얀 결을 가진 사람들이 모여 현실에서 못다 한 마음의 해결을 해나갑시다.</p>
                </div>
                <!-- 49 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 49.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">이상은 미래의 현실</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">건실한 이상은 불가능한 꿈이 아니라 미래에 다가올 일입니다. 이상을 포기하지 마세요. 그 이상이 여러분을 빛나게 할 것입니다.</p>
                </div>
                <!-- 50 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 50.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">살아있는 책</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">천국방은 여러분이 실시간으로 써 내려가는 살아있는 책입니다. 같은 시대를 살아가는 존재로서 지친 마음을 치유하세요.</p>
                </div>
                <!-- 51 -->
                <div class="break-inside-avoid bg-[#FDF4FF] dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm border border-purple-100 dark:border-slate-700 hover:shadow-lg transition relative group">
                    <div class="text-purple-400 dark:text-purple-300 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-star mr-3 text-sm"></i> 51.</div>
                    <h3 class="font-cute text-3xl mb-4 text-slate-800 dark:text-slate-100">작은 나눔</h3>
                    <p class="text-slate-600 dark:text-slate-300 text-2xl leading-relaxed font-hand">아주 작은 일상이라도 대화를 통해 나눠주세요. 소소한 행복이 퍼져 모두가 미소 짓게 될 것입니다.</p>
                </div>
                 <!-- 52 -->
                <div class="break-inside-avoid bg-gradient-to-br from-indigo-400 to-purple-500 dark:from-indigo-800 dark:to-purple-800 p-8 rounded-[2rem] shadow-md text-white transform rotate-1 hover:rotate-0 transition">
                    <div class="text-purple-100 font-cute text-2xl mb-3 flex items-center"><i class="fas fa-shield-alt mr-3 text-sm"></i> 52.</div>
                    <h3 class="font-cute text-3xl mb-4">천국 파수꾼</h3>
                    <p class="text-purple-50 text-2xl leading-relaxed font-hand">순수하고 상처 많은 사람들을 위한 세상을 지키고 싶습니다. 여러분도 누군가의 파수꾼이 되어 도움을 주고받는 공간이 되었으면 합니다. 도움의 핵심은 글입니다.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. [기능 8번] 익명 대나무 숲 & 방명록 -->
    <section id="guestbook" class="py-24 bg-slate-100 dark:bg-slate-950 relative z-10 transition-colors duration-500">
        <div class="max-w-7xl mx-auto px-6">
            <!-- 탭 전환 버튼 -->
            <div class="flex justify-center mb-10 bg-white dark:bg-slate-800 inline-block mx-auto rounded-full p-1 shadow-sm">
                <button id="tabPublic" class="px-6 py-2 rounded-full font-cute text-lg transition-all bg-purple-500 text-white shadow-md">💌 응원의 한마디</button>
                <button id="tabSecret" class="px-6 py-2 rounded-full font-cute text-lg text-slate-500 dark:text-slate-400 hover:text-purple-500 transition-all">🎋 비밀 대나무 숲</button>
            </div>

            <div class="text-center mb-8">
                <h2 id="sectionTitle" class="text-4xl font-cute text-slate-800 dark:text-white mb-2">따뜻한 응원을 남겨주세요</h2>
                <p id="sectionDesc" class="text-slate-500 font-hand text-xl">서로에게 힘이 되는 예쁜 말들만 모아둡니다.</p>
            </div>

            <!-- 입력 폼 -->
            <div class="bg-white dark:bg-slate-900 p-8 rounded-[2rem] shadow-sm mb-12 border border-slate-200 dark:border-slate-800">
                <form id="guestForm" class="flex flex-col gap-4">
                    <div class="flex flex-col md:flex-row gap-4">
                        <input type="text" id="nameInput" placeholder="닉네임" maxlength="10"
                            class="w-full md:w-1/3 px-6 py-3 rounded-full border-2 border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-white focus:outline-none focus:border-purple-400 font-cute text-lg">
                        <input type="text" id="msgInput" placeholder="하고 싶은 말을 적어주세요..." required
                            class="w-full md:w-2/3 px-6 py-3 rounded-full border-2 border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-white focus:outline-none focus:border-purple-400 font-hand text-2xl">
                    </div>
                    <button type="submit" 
                        class="w-full bg-infp-main hover:bg-infp-dark text-white font-cute text-xl py-3 rounded-full transition shadow-md hover:shadow-lg transform hover:-translate-y-1">
                        등록하기
                    </button>
                </form>
            </div>

            <!-- 정렬 필터 -->
            <div class="flex justify-end mb-4 gap-2">
                <button id="sortLatest" class="px-4 py-2 bg-purple-500 text-white rounded-full font-cute text-sm shadow-md">최신순</button>
                <button id="sortLikes" class="px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full font-cute text-sm hover:bg-slate-300 transition">좋아요순</button>
            </div>

            <!-- 게시글 리스트 -->
            <div class="bg-slate-200/50 dark:bg-slate-900/50 p-6 rounded-3xl border border-slate-300 dark:border-slate-800 backdrop-blur-sm">
                <div id="messageList" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 max-h-[600px] overflow-y-auto pr-2 custom-scroll">
                    <div class="text-center col-span-full text-slate-500 font-hand text-xl py-10">
                        데이터를 불러오는 중이에요... <i class="fas fa-spinner fa-spin"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-slate-900 text-slate-400 py-16 text-center relative z-10 mt-12">
        <p class="font-hand text-3xl mb-2 text-purple-300">"그럼에도 불구하고, 당신은 아름다운 사람입니다."</p>
        <p class="text-base font-cute opacity-60">INFP Thought Garden © 2024</p>
    </footer>

    <!-- 유튜브 API -->
    <script src="https://www.youtube.com/iframe_api"></script>

    <!-- 파이어베이스 및 로직 -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, limit, serverTimestamp, updateDoc, doc, increment, where } 
            from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // ★★★ 빵장님의 파이어베이스 설정값 (완벽 적용!) ★★★
        const firebaseConfig = {
            apiKey: "AIzaSyBB7B_6-b0k-NQdlBAoPyzjq4O-UJq9-Rk",
            authDomain: "infp-love.firebaseapp.com",
            projectId: "infp-love",
            storageBucket: "infp-love.firebasestorage.app",
            messagingSenderId: "744268532848",
            appId: "1:744268532848:web:b8ddb3b17b5d496b4338b5"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- 유튜브 플레이어 로직 ---
        window.player = [];
        window.onYouTubeIframeAPIReady = function() {
            // 빵장님이 고르신 영상 ID 적용!
            const videoIds = ['NWUnDp-iNkU', 'r9chqaNT340', 'ENGoSMNqQWs'];
            videoIds.forEach((id, index) => {
                player[index] = new YT.Player(`player${index}`, {
                    height: '0',
                    width: '0',
                    videoId: id,
                    playerVars: { 'playsinline': 1 },
                    events: { 'onStateChange': onPlayerStateChange }
                });
            });
        };

        function onPlayerStateChange(event) {
            // 상태 변화 감지 (필요 시 구현)
        }

        window.toggleAudio = function(index) {
            const btn = document.getElementById(`btn${index}`);
            const card = document.getElementById(`playerCard${index}`);
            const icon = btn.querySelector('i');
            const state = player[index].getPlayerState();

            // 다른 오디오 끄기
            for(let i=0; i<3; i++) {
                if(i !== index && player[i] && player[i].getPlayerState() === 1) {
                    player[i].pauseVideo();
                    document.getElementById(`btn${i}`).innerHTML = '<i class="fas fa-play ml-1"></i>';
                    document.getElementById(`playerCard${i}`).classList.remove('playing');
                }
            }

            if (state === 1) { // 재생 중이면 멈춤
                player[index].pauseVideo();
                btn.innerHTML = '<i class="fas fa-play ml-1"></i>';
                card.classList.remove('playing');
            } else { // 멈춤이면 재생
                player[index].playVideo();
                btn.innerHTML = '<i class="fas fa-pause"></i>';
                card.classList.add('playing');
            }
        };

        // --- 기존 로직 (방명록, 식물 등) ---
        let currentTab = 'public'; 
        let currentSort = 'date';
        let unsubscribe;
        let totalMsgCount = 0; // 전체 메시지 수
        let journalData = []; // 일지 데이터

        // 1. 오늘의 질문
        const questions = [
            "당신의 영혼은 무슨 색깔인가요?", "가장 그리워하는 시절은 언제인가요?",
            "나를 가장 행복하게 하는 작은 순간은?", "듣고 싶은 위로의 말이 있나요?",
            "당신은 어떤 계절을 닮았나요?"
        ];
        document.getElementById('dailyQuestion').innerText = questions[Math.floor(Math.random() * questions.length)];

        // 2. 탭 전환 (응원 vs 대나무숲)
        const tabPublic = document.getElementById('tabPublic');
        const tabSecret = document.getElementById('tabSecret');
        const nameInput = document.getElementById('nameInput');
        const sectionTitle = document.getElementById('sectionTitle');
        const sectionDesc = document.getElementById('sectionDesc');

        tabPublic.addEventListener('click', () => switchTab('public'));
        tabSecret.addEventListener('click', () => switchTab('secret'));

        function switchTab(mode) {
            currentTab = mode;
            if (mode === 'public') {
                tabPublic.className = "px-6 py-2 rounded-full font-cute text-lg transition-all bg-purple-500 text-white shadow-md";
                tabSecret.className = "px-6 py-2 rounded-full font-cute text-lg text-slate-500 dark:text-slate-400 hover:text-purple-500 transition-all";
                nameInput.style.display = 'block'; nameInput.value = '';
                sectionTitle.innerText = "따뜻한 응원을 남겨주세요";
                sectionDesc.innerText = "서로에게 힘이 되는 예쁜 말들만 모아둡니다.";
            } else {
                tabPublic.className = "px-6 py-2 rounded-full font-cute text-lg text-slate-500 dark:text-slate-400 hover:text-purple-500 transition-all";
                tabSecret.className = "px-6 py-2 rounded-full font-cute text-lg transition-all bg-green-700 text-white shadow-md";
                nameInput.style.display = 'none';
                sectionTitle.innerText = "임금님 귀는 당나귀 귀!";
                sectionDesc.innerText = "이름 없는 대나무 숲입니다. 마음껏 털어놓으세요.";
            }
            loadMessages(currentSort); 
        }

        // 3. 방명록 쓰기
        const form = document.getElementById('guestForm');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            let name = nameInput.value;
            if (currentTab === 'secret') name = `대나무 #${Math.floor(Math.random() * 1000)}`;
            const msg = document.getElementById('msgInput').value;
            if (!msg) return;
            if (currentTab === 'public' && !name) { alert("닉네임을 입력해주세요!"); return; }

            try {
                await addDoc(collection(db, "guestbook"), {
                    type: currentTab, name: name, message: msg, date: serverTimestamp(),
                    color: Math.floor(Math.random() * 4), likes: 0
                });
                form.reset();
                alert(currentTab === 'public' ? "메시지가 등록되었습니다! 💌" : "숲 속에 비밀을 묻었습니다. 🎋");
            } catch (error) { console.error(error); alert("오류가 발생했습니다."); }
        });

        // 4. 방명록 읽기 (식물 성장 포함)
        function loadMessages(sortField) {
            const messageList = document.getElementById('messageList');
            const q = query(collection(db, "guestbook"), orderBy(sortField, "desc"), limit(100));

            // 식물 성장 & 수확 버튼 관리
            const qAll = query(collection(db, "guestbook"));
            onSnapshot(qAll, (snap) => {
                totalMsgCount = snap.size;
                updatePlant(totalMsgCount % 50); // 50개마다 리셋되는 효과 (시각적)
            });

            if (unsubscribe) unsubscribe();

            unsubscribe = onSnapshot(q, (snapshot) => {
                messageList.innerHTML = "";
                const filteredDocs = snapshot.docs.filter(doc => {
                    const data = doc.data();
                    const type = data.type || 'public'; 
                    return type === currentTab;
                });

                if (filteredDocs.length === 0) {
                    messageList.innerHTML = `<div class="text-center col-span-full text-slate-500 font-hand text-xl py-10">아직 글이 없어요. 첫 발자국을 남겨주세요! 🐾</div>`;
                    return;
                }

                const colors = ['bg-yellow-100', 'bg-pink-100', 'bg-blue-100', 'bg-green-100'];
                const secretColors = ['bg-slate-700', 'bg-green-900', 'bg-slate-800', 'bg-green-800']; 

                filteredDocs.forEach((doc) => {
                    const data = doc.data();
                    const docId = doc.id;
                    let colorClass = colors[data.color] || 'bg-yellow-100';
                    let textColor = 'text-slate-800';
                    if (currentTab === 'secret') {
                        colorClass = secretColors[data.color] || 'bg-slate-700';
                        textColor = 'text-slate-200';
                    }
                    const likeCount = data.likes || 0;
                    const isLiked = localStorage.getItem(`liked_${docId}`) ? 'liked' : '';
                    const heartIcon = isLiked ? 'fas' : 'far';
                    let dateStr = "";
                    if(data.date) {
                        const date = data.date.toDate();
                        dateStr = `${date.getMonth()+1}/${date.getDate()}`;
                    }

                    const card = `
                        <div class="post-it ${colorClass} ${textColor} p-4 h-40 flex flex-col justify-between rotate-1 rounded-xl hover:z-50 hover:scale-110 transition duration-200 relative group shadow-sm border border-black/5">
                            <div class="font-hand text-xl leading-snug overflow-y-auto custom-scroll mb-8">"${data.message}"</div>
                            <div class="absolute bottom-3 left-4 right-4 flex justify-between items-end border-t border-black/10 dark:border-white/10 pt-2">
                                <div class="flex flex-col"><span class="font-cute text-xs truncate max-w-[80px]">${data.name}</span><span class="text-[10px] opacity-60 font-sans">${dateStr}</span></div>
                                <button onclick="toggleLike('${docId}')" class="flex items-center gap-1 hover:bg-white/20 rounded-full px-2 py-1 transition ${isLiked} text-red-400"><i class="${heartIcon} fa-heart"></i> <span class="text-xs font-bold font-sans">${likeCount}</span></button>
                            </div>
                        </div>
                    `;
                    messageList.innerHTML += card;
                });
            });
        }

        // 5. 식물 성장 및 수확
        function updatePlant(count) {
            const plantImg = document.getElementById('plantImage');
            const progress = document.getElementById('plantProgress');
            const levelText = document.getElementById('plantLevelText');
            const harvestBtn = document.getElementById('harvestBtn');
            
            let level = 1; let max = 10;
            let imgSrc = "plant_1.jpg"; let name = "꿈꾸는 씨앗";

            if (count >= 50) {
                level = 4; max = 50; imgSrc = "plant_4.jpg"; name = "결실의 나무";
                harvestBtn.classList.remove('hidden'); // 수확 버튼 보이기
            } else {
                harvestBtn.classList.add('hidden');
                if (count >= 20) { level = 3; max = 50; imgSrc = "plant_3.jpg"; name = "자라나는 나무"; }
                else if (count >= 5) { level = 2; max = 20; imgSrc = "plant_2.jpg"; name = "수줍은 새싹"; }
            }

            let percentage = Math.min((count / max) * 100, 100);
            plantImg.src = imgSrc;
            progress.style.width = `${percentage}%`;
            levelText.innerText = `Level ${level}. ${name} (${count}/${max})`;
        }

        // 정원 일지 (수확 기능)
        window.harvestGarden = async () => {
            if(!confirm("정말 수확하시겠습니까? 나무가 다시 씨앗으로 돌아갑니다.")) return;
            
            const seasonName = prompt("이 계절에 이름을 붙여주세요 (예: 2024년 첫 봄)", "기록된 계절");
            if(!seasonName) return;

            try {
                await addDoc(collection(db, "journals"), {
                    seasonName: seasonName,
                    count: totalMsgCount,
                    date: serverTimestamp()
                });
                alert("수확이 완료되었습니다! 일지에 기록되었어요. 📖");
                // 실제 리셋 로직은 복잡하므로 여기선 알림만 주고, 시각적으로는 50개 단위로 자동 리셋됨
                location.reload(); 
            } catch(e) { console.error(e); }
        };

        // 정원 일지 열기/닫기
        window.openJournal = () => {
            document.getElementById('journalModal').classList.remove('hidden');
            loadJournals();
        };
        window.closeJournal = () => document.getElementById('journalModal').classList.add('hidden');

        function loadJournals() {
            const journalList = document.getElementById('journalList');
            const q = query(collection(db, "journals"), orderBy("date", "desc"));
            
            onSnapshot(q, (snapshot) => {
                journalList.innerHTML = "";
                if(snapshot.empty) {
                    journalList.innerHTML = `<div class="text-center text-slate-500 py-4 font-hand text-xl">아직 기록된 계절이 없어요.</div>`;
                    return;
                }
                snapshot.forEach(doc => {
                    const data = doc.data();
                    let dateStr = "";
                    if(data.date) {
                        const date = data.date.toDate();
                        dateStr = `${date.getFullYear()}.${date.getMonth()+1}.${date.getDate()}`;
                    }
                    journalList.innerHTML += `
                        <div class="bg-purple-50 dark:bg-slate-700 p-4 rounded-xl flex justify-between items-center">
                            <div>
                                <h4 class="font-cute text-lg text-slate-800 dark:text-white">${data.seasonName}</h4>
                                <p class="text-xs text-slate-500 dark:text-slate-400">${dateStr} 수확함</p>
                            </div>
                            <div class="text-2xl">🍎</div>
                        </div>
                    `;
                });
            });
        }

        // 좋아요 토글
        window.toggleLike = async (docId) => {
            if (localStorage.getItem(`liked_${docId}`)) { alert("이미 마음을 표현했어요! 💜"); return; }
            try {
                const docRef = doc(db, "guestbook", docId);
                await updateDoc(docRef, { likes: increment(1) });
                localStorage.setItem(`liked_${docId}`, "true");
            } catch (error) { console.error(error); }
        };

        // 정렬
        document.getElementById('sortLatest').addEventListener('click', () => { currentSort = 'date'; loadMessages('date'); });
        document.getElementById('sortLikes').addEventListener('click', () => { currentSort = 'likes'; loadMessages('likes'); });

        // 테마 & 모바일 메뉴
        const themeBtnDesktop = document.getElementById('themeBtnDesktop');
        const themeBtnMobile = document.getElementById('themeBtnMobile');
        const html = document.documentElement;
        function toggleTheme() {
            html.classList.toggle('dark');
            localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
        }
        themeBtnDesktop.addEventListener('click', toggleTheme);
        if(themeBtnMobile) themeBtnMobile.addEventListener('click', toggleTheme);
        const menuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        menuBtn.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));

        // 초기 실행
        loadMessages('date');
    </script>
</body>
</html>
